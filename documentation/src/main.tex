% Preamble
\documentclass[11pt,openany]{book}
\usepackage[a4paper, total={6in, 8in},headsep=1cm]{geometry}

% Packages
\usepackage{amsmath}
\usepackage{tikz}
\usetikzlibrary{shapes.geometric, arrows}
%\usepackage{amstex}
\usetikzlibrary{calc}
\usepackage{fancyheadings}
\usetikzlibrary{decorations.markings}
\usetikzlibrary{decorations.pathmorphing,patterns}
\usepackage{transparent}
\usepackage{graphicx}
\usepackage{float}
\usepackage{subcaption}
\usepackage [autostyle, english = american]{csquotes}
\usepackage{hyperref}
\hypersetup{
    colorlinks,
    linkcolor={blue!50!black},
    citecolor={blue!50!black},
    urlcolor={blue!80!black}
}
\usepackage{pgfplots}
\usepackage{babel}[english]
%\usepackage[super]{natbib}
\pgfplotsset{compat=1.12}
%\usepackage{biblatex}
\usepackage[backend=bibtex, urldate=long,
    sorting=none,
    defernumbers,style=numeric,autocite=superscript]{biblatex}
\addbibresource{sources.bib}
\usepackage[fixlanguage]{babelbib}
%\DefineBibliographyStrings[english]{%
%    urlseen={last visited},
%}

\DeclareFieldFormat{urldate}{\mkbibparens{\bibstring{last visited on}\space#1}}


% rust formatting
\usepackage{color}
\usepackage{listings}
\usepackage{calc}
%\usepackage{biblatex}
\definecolor{GrayCodeBlock}{RGB}{241,241,241}
\definecolor{BlackText}{RGB}{110,107,94}
\definecolor{RedTypename}{RGB}{182,86,17}
\definecolor{GreenString}{RGB}{96,172,57}
\definecolor{PurpleKeyword}{RGB}{184,84,212}
\definecolor{GrayComment}{RGB}{170,170,170}
\definecolor{GoldDocumentation}{RGB}{180,165,45}
\lstdefinelanguage{rust}
{
    columns=fullflexible,
    keepspaces=true,
    frame=single,
    framesep=0pt,
    framerule=0pt,
    framexleftmargin=4pt,
    framexrightmargin=4pt,
    framextopmargin=5pt,
    framexbottommargin=3pt,
    xleftmargin=4pt,
    xrightmargin=4pt,
    numbers=left, % display line numbers on the left
    backgroundcolor=\color{GrayCodeBlock},
    basicstyle=\ttfamily\color{BlackText},
    keywords={
    true,false,
    unsafe,async,await,move,
    use,pub,crate,super,self,mod,
    struct,enum,fn,const,static,let,mut,ref,type,impl,dyn,trait,where,as,
    break,continue,if,else,while,for,loop,match,return,yield,in
},
    keywordstyle=\color{PurpleKeyword},
    ndkeywords={
    bool,u8,u16,u32,u64,u128,i8,i16,i32,i64,i128,char,str,
    Self,Option,Some,None,Result,Ok,Err,String,Box,Vec,Rc,Arc,Cell,RefCell,HashMap,BTreeMap,
    macro_rules
},
    ndkeywordstyle=\color{RedTypename},
    comment=[l][\color{GrayComment}\slshape]{//},
    morecomment=[s][\color{GrayComment}\slshape]{/*}{*/},
    morecomment=[l][\color{GoldDocumentation}\slshape]{///},
    morecomment=[s][\color{GoldDocumentation}\slshape]{/*!}{*/},
    morecomment=[l][\color{GoldDocumentation}\slshape]{//!},
    morecomment=[s][\color{RedTypename}]{\#![}{]},
    morecomment=[s][\color{RedTypename}]{\#[}{]},
    stringstyle=\color{GreenString},
    string=[b]"
}

\lstdefinelanguage{cpp}
{
    columns=fullflexible,
    keepspaces=true,
    frame=single,
    framesep=0pt,
    framerule=0pt,
    framexleftmargin=4pt,
    framexrightmargin=4pt,
    framextopmargin=5pt,
    framexbottommargin=3pt,
    xleftmargin=4pt,
    xrightmargin=4pt,
    numbers=left, % display line numbers on the left
    backgroundcolor=\color{GrayCodeBlock},
    basicstyle=\ttfamily\color{BlackText},
    keywords={
    alignas,alignof,asm,auto,break,case,catch,char,char8_t,char16_t,char32_t,
    class,const,consteval,constexpr,constinit,continue,decltype,default,delete,do,
    double,dynamic_cast,else,enum,explicit,export,extern,false,float,for,
    friend,goto,if,inline,int,long,mutable,namespace,new,noexcept,nullptr,
    operator,private,protected,public,register,reinterpret_cast,return,
    short,signed,sizeof,static,static_assert,static_cast,struct,switch,
    template,this,thread_local,throw,true,try,typedef,typeid,typename,
    union,unsigned,using,virtual,void,volatile,wchar_t,while
},
    keywordstyle=\color{PurpleKeyword},
    ndkeywords={
    std,string,vector,map,set,unordered_map,unordered_set,shared_ptr,
    unique_ptr,weak_ptr,array,optional,variant,tuple,pair,ostream,
    istream,cout,cin,endl
},
    ndkeywordstyle=\color{RedTypename},
    comment=[l][\color{GrayComment}\slshape]{//},
    morecomment=[s][\color{GrayComment}\slshape]{/*}{*/},
    stringstyle=\color{GreenString},
    string=[b]"
}

% get name of current section
\makeatletter
\newcommand*{\currentname}{\@currentlabelname}
\makeatother


% get name of current chapter
\let\Chaptermark\chaptermark
\def\chaptermark#1{\def\Chaptername{#1}\Chaptermark{#1}}



\tikzstyle directed=[postaction={decorate,decoration={markings, % arrows on the field lines
mark=at position .1 with {\arrowreversed[scale=1.5]{stealth}},
mark=at position .9 with {\arrowreversed[scale=1.5]{stealth}}}}]
\tikzstyle tangent=[postaction={decorate,decoration={markings, % Tangent to the field line
mark=at position .7 with {\draw[ultra thick,stealth-,green!60!black,solid](-12pt,0)--(12pt,0)node[above]{$\vec{B}$};}}}]
\tikzstyle fLines=[thick,dashed,directed,tangent]
% tikz stuff for the flow charts
\tikzstyle{startstop} = [rectangle, rounded corners, minimum width=3cm, minimum height=1cm,text centered, draw=black, fill=red!30]
\tikzstyle{io} = [trapezium, trapezium left angle=70, trapezium right angle=110, minimum width=1cm, minimum height=1cm, text centered, draw=black, fill=blue!30]
\tikzstyle{process} = [rectangle, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=orange!30]
\tikzstyle{decision} = [diamond, minimum width=3cm, minimum height=1cm, text centered, draw=black, fill=green!30]
\tikzstyle{arrow} = [thick,->,>=stealth]

% #1 number of teeth
% #2 radius intern
% #3 radius extern
% #4 angle from start to end of the first arc
% #5 angle to decale the second arc from the first
\newcommand{\gear}[5]{%
    \foreach \i in {1,...,#1} {%
        [rotate=(\i-1)*360/#1]
        (0:#2) arc (0:#4:#2)
        [rounded corners=1.5pt]
        -- (#4+#5:#3)
        arc (#4+#5:360/#1-#5:#3)
        -- (360/#1:#2)
    }
}

\newcommand{\mycancel}[2]{\overset{#1}{\cancel{#2}}}
\renewcommand{\deg}[0]{\ensuremath{^\circ}}
\newcommand{\abs}[1]{\left|#1\right|}
\newcommand{\cfbox}[2]{%
    \colorlet{currentcolor}{.}%
    {\color{#1}%
    \noindent\fbox{\vbox{\hsize\dimexpr\hsize-2\fboxsep\relax
    #2
    }}}%
}
\newcommand{\todo}[1]{\begin{center}\cfbox{red}{\textcolor{red}{Todo: #1}}\end{center}}

\oddsidemargin=-1cm
\evensidemargin=-1cm
\voffset=-1.7cm
\textheight=26cm
\textwidth=18cm



\thispagestyle{fancy}

\fancyhf{} % clear all fields
\newcommand{\footl}{\Chaptername}
\newcommand{\bottompage}{-- \thepage\ --}

\fancypagestyle{plain}{%
    \fancyhf{}
    \fancyhead[L]{\rule[-2ex]{0pt}{2ex}\small Matura Project}
    \fancyhead[R]{\small Jan Wilhelm 6e}
    \fancyfoot[L]{\small \footl}
    \fancyfoot[C]{\bottompage}
    \fancyfoot[R]{\small \date{\today}}
    \renewcommand{\headrulewidth}{0.2pt}
    \renewcommand{\footrulewidth}{0.2pt}}
\pagestyle{plain}


\title{
    \linespread{1.8}
    Jan Wilhelm, 6e\\
    \Huge \textbf{Foosball goalkeeper robot}\\
    \begin{figure}[H]
        \centering
        \includegraphics[width=0.5\linewidth]{../photos/title}
        \caption{}
        \label{fig:title}
    \end{figure}
\Large
    \textbf{Maturitätsarbeit 2024}\\
    Kantonsschule Hohe Promenade, Zürich\\
    \textbf{Supervisor:} Clemens Pohle\\
    \textbf{Advisor:} Dr. Hugo Leonel Cabrera Cifuentes\\
    \linespread{1}}
\date\today

%\linespread{1.8}


% Document
\begin{document}

    \makeatletter
    \voffset=-1cm
    \begin{titlepage}
        \thispagestyle{fancy}
        \renewcommand{\headrulewidth}{0pt}
        \renewcommand{\footrulewidth}{0pt}
        \lhead{\includegraphics[scale=0.5]{../photos/hopro_logo}}
        \rhead{}
        \cfoot{} % this is to remove the page number
        \hbox{}\vfill
        \begin{center}
        {\LARGE\@title}
            \\[3em]
            {\large\@author}\\[1.75em]
            {\large\@date}
        \end{center}
        \vspace{3cm}\vfill
    \end{titlepage}
    \makeatother
    \voffset=-1.7cm

    % todo: main questions: We/I or unpersonal?
    % -> I always use I
%    \maketitle
%    \mewpage

    \shipout\null


    \renewcommand{\bottompage}{}
    \tableofcontents
%    \newpage


    \chapter{Introduction}\label{ch:introduction}
    \renewcommand{\bottompage}{-- \thepage\ --}
    \setcounter{page}{1}
    \input{introduction}


    \chapter{Calculations}\label{ch:calculations}
    \input{calculations}


    \chapter{Mechanics}\label{ch:mechanics}
    \input{mechanics}


    \chapter{Construction}\label{ch:construction}
    \input{construction}


    \chapter{Electronics}\label{ch:electronics}
    \input{electronics}


    \chapter{Software}\label{ch:software}
    \input{software}


    \chapter{Results}\label{ch:results}
    \todo{Finish project to get lates results}


    \chapter{Conclusion}\label{ch:conclusion}
    \input{conclusion}

%    \chapter{References}\label{ch:references}

    \bibliographystyle{plain}
    \printbibliography
%    \newpage
%    \bibliographystyle{unsrt}
%%    \renewcommand\refname{Quellen}
%    \makeatletter
%    \renewcommand\@biblabel[1]{\textbullet}
%    \makeatother
%    \bibliography{sources} % Entries are in the refs.bib file
%    \printbibliography
%    \nocite{*}


    \chapter{Appendix}\label{ch:appendix}
    \input{appendix}

\end{document}

% pdflatex -interaction=nonstopmode -output-directory=output src/main.tex

